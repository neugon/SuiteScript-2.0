"use strict";define(["N/search","N/record","N/email","N/runtime"],function(e,t,r,i){function n(n){if(n.type===n.InvocationType.ON_DEMAND){var o=i.getCurrentScript().getParameter("custscript_searchid");try{e.load({id:o}).run().each(function(e){log.debug("transforming so :"+e.id+" to item fulfillment");for(var r=t.transform({fromType:t.Type.SALES_ORDER,fromId:e.id,toType:t.Type.ITEM_FULFILLMENT,isDynamic:!1}),i=r.getLineCount("item"),n=0;i>n;n+=1)r.setSublistValue("item","location",n,1);var o=r.save(),a=t.load({type:t.Type.SALES_ORDER,id:e.id});return a.setValue("memo",o),a.save(),!0})}catch(a){var c="Fatal Error: Unable to transform salesorder to item fulfillment!",s=-5,u="notify@company.com";r.send({author:s,recipients:u,subject:c,body:"Fatal error occurred in script: "+i.getCurrentScript().id+"\n\n"+JSON.stringify(a)})}}}return{execute:n}});